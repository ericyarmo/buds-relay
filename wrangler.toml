name = "buds-relay"
main = "src/index.ts"
compatibility_date = "2024-01-01"

# Development environment
[env.dev]
name = "buds-relay-dev"

# Production environment (use later)
[env.production]
name = "buds-relay"

# KV namespace for Firebase public key caching
[[kv_namespaces]]
binding = "KV_CACHE"
id = "5019bafb2abf4e62a3c641df0db8d187"

# D1 Database
[[d1_databases]]
binding = "DB"
database_name = "buds-relay-db"
database_id = "1ad09189-17cd-4efe-8bc1-7cd8b195769b"

# Rate limiting (native Cloudflare Workers)
# [[unsafe.bindings]]
# name = "RATE_LIMITER"
# type = "ratelimit"
# namespace_id = "buds_relay_ratelimit"

# Environment variables
[vars]
ENVIRONMENT = "development"
FIREBASE_PROJECT_ID = "buds-prod" # Replace with your Firebase project ID

# Scheduled cleanup job (runs daily at 2 AM UTC)
[triggers]
crons = ["0 2 * * *"]
